(this["webpackJsonpredux-libs-demo-app"]=this["webpackJsonpredux-libs-demo-app"]||[]).push([[0],{223:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a(24),s=a(64),l=Object(s.b)({name:"app"}),i={checkedContactIds:[],contacts:null,deletedContactIds:[],editContact:void 0,filter:"",isLoading:!1,isSaving:!1,lastError:void 0,orderBy:"firstName",orderDir:"asc",selectedContactId:0},d=Object(s.a)({initialState:i,name:"$contacts",parent:l}),u=d.selectors,p=u.checkedContactIds,f=u.contacts,b=u.deletedContactIds,m=u.editContact,v=u.filter,C=u.isLoading,E=u.isSaving,O=u.orderBy,j=u.orderDir,y=u.selectedContactId,h=Object(o.a)(b,f,(function(e,t){return t?t.filter((function(t){return!e.includes(t.id)})):t})),x=Object(o.a)(v,h,(function(e,t){return e&&t?t&&t.filter((function(t){return function(e,t){return t.length>0&&(function(e,t){var a="".concat(e.firstName," ").concat(e.lastName);try{var n=new RegExp(t,"gi");return a.search(n)>-1}catch(r){return!1}}(e,t)||function(e,t){return Boolean(e&&-1!==e.indexOf(t.toLowerCase()))}(e.birthDate,t))}(t,e)})):t}));var g=a(66),k=a(193),N=a(20),I=a(213),w=a(222);var D=a(9),S=a.n(D),L=a(177),B=a(74),R=a(178),P=a(47);function F(e){var t=e.message;return e.response&&e.response.statusText&&(t=e.response.statusText),e.response&&e.response.data&&(t="".concat(t,"\n ").concat(e.response.data)),console.error("Error: ",t),t}var M=S.a.mark(A),J=d.addCaseReducers({contactSaved:function(e,t){t.payload.contact;e.isSaving=!1},saveContact:function(e,t){e.isSaving=!0,e.lastError=void 0,e.editContact=void 0},saveContactError:function(e,t){e.isSaving=!1,e.lastError=t.payload}}),G=J.saveContact,T=(J.saveContactError.type,J.contactSaved.type);function A(e){var t,a;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(R.a)($,e.payload);case 3:return t=n.sent,n.next=6,Object(R.b)(J.contactSaved({contact:t}));case 6:n.next=15;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,Object(R.a)(F,n.t0);case 12:return a=n.sent,n.next=15,Object(R.b)(J.saveContactError(a));case 15:case"end":return n.stop()}}),M,null,[[0,8]])}function $(e){var t=e.id;return t?Object(L.a)("".concat(P.a,"/contacts/").concat(t)).put(e).json():Object(L.a)("".concat(P.a,"/contacts")).post(e).json()}Object(B.b)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.d)([G.type],A);case 2:case"end":return e.stop()}}),e)})));var q=d.addCaseReducers({editContact:function(e,t){e.editContact=t.payload}}).editContact;function z(e){var t=e.editContact,a=Object(c.d)(),o=Object(c.e)(E),s=Object(n.useState)({birthDate:"",firstName:"",id:0,lastName:""}),l=Object(N.a)(s,2),i=l[0],d=l[1];Object(n.useEffect)((function(){var e;d(null===(e=t)||void 0===e?e:JSON.parse(JSON.stringify(e)))}),[t]);var u=function(e){d(Object(k.a)(Object(k.a)({},i),{},Object(g.a)({},e.target.name,e.target.value)))},p=""!==i.firstName.trim()&&""!==i.lastName.trim()&&10===i.birthDate.length;return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a(G(i))}},r.a.createElement(w.a,{InputLabelProps:{shrink:!0},label:"First Name",name:"firstName",onChange:u,value:i.firstName}),r.a.createElement("br",null),r.a.createElement(w.a,{InputLabelProps:{shrink:!0},label:"Last Name",name:"lastName",onChange:u,value:i.lastName}),r.a.createElement("br",null),r.a.createElement(w.a,{InputLabelProps:{shrink:!0},label:"Birthday",name:"birthDate",onChange:u,type:"date",value:i.birthDate}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(I.a,{disabled:o,onClick:function(){return a(q())}},"Cancel"),r.a.createElement(I.a,{color:"primary",disabled:o||!p,type:"submit",variant:"contained"},o?"Saving...":"Save")))}var H=a(163),K=a(166),Q=d.addCaseReducers({setOrderBy:function(e,t){var a=t.payload,n="asc";a===e.orderBy&&(n="asc"===e.orderDir?"desc":"asc"),e.orderBy=a,e.orderDir=n}}).setOrderBy,U=Q.type,V=S.a.mark(Y),W=d.addCaseReducers({contactsChanged:function(e,t){var a=t.payload.contacts;e.isLoading=!1,e.contacts=a},loadContacts:function(e){e.isLoading=!0,e.contacts=null,e.lastError=void 0},loadContactsError:function(e,t){e.isLoading=!1,e.lastError=t.payload}}),X=W.loadContacts;W.loadContactsError.type,W.contactsChanged.type;function Y(){var e,t,a,n;return S.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(R.c)(O);case 3:return e=r.sent,r.next=6,Object(R.c)(j);case 6:return t=r.sent,r.next=9,Object(R.a)(Z,e,t);case 9:return a=r.sent,r.next=12,Object(R.b)(W.contactsChanged({contacts:a}));case 12:r.next=21;break;case 14:return r.prev=14,r.t0=r.catch(0),r.next=18,Object(R.a)(F,r.t0);case 18:return n=r.sent,r.next=21,Object(R.b)(W.loadContactsError(n));case 21:case"end":return r.stop()}}),V,null,[[0,14]])}function Z(e,t){return Object(L.a)("".concat(P.a,"/contacts?orderBy=").concat(e,"&orderDir=").concat(t)).get().json()}Object(B.b)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.d)([X.type,U,T],Y);case 2:case"end":return e.stop()}}),e)})));var _=d.addCaseReducers({setFilter:function(e,t){var a=t.payload;e.filter=a}}).setFilter,ee=a(224),te=a(218),ae=a(220),ne=a(215),re=a(219),ce=a(214),oe=a(227),se=a(221),le=a(217),ie=S.a.mark(fe),de=d.addCaseReducers({deleteContact:function(e,t){var a=t.payload.id;e.deletedContactIds.includes(a)||e.deletedContactIds.push(a)},deleteContactDone:function(e,t){var a=t.payload.id,n=e.checkedContactIds,r=e.contacts,c=e.deletedContactIds,o=c.findIndex((function(e){return e===a}));-1!==o&&c.splice(o,1),-1!==(o=n.findIndex((function(e){return e===a})))&&n.splice(o,1),r&&(o=r.findIndex((function(e){return e.id===a})),r.splice(o,1)),e.selectedContactId===a&&(e.selectedContactId=0)},deleteContactError:function(e,t){var a=t.payload,n=a.contact,r=a.errorMsg,c=n.id;e.lastError=r;var o=e.deletedContactIds,s=o.findIndex((function(e){return e===c}));-1!==s&&o.splice(s,1)}}),ue=de.deleteContact,pe=(de.deleteContactError.type,de.deleteContactDone);pe.type;function fe(e){var t,a;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,n.next=4,Object(R.a)(be,t.id);case 4:return n.next=6,Object(R.b)(pe(t));case 6:n.next=15;break;case 8:return n.prev=8,n.t0=n.catch(1),n.next=12,Object(R.a)(F,n.t0);case 12:return a=n.sent,n.next=15,Object(R.b)(de.deleteContactError({contact:t,errorMsg:a}));case 15:case"end":return n.stop()}}),ie,null,[[1,8]])}function be(e){return Object(L.a)("".concat(P.a,"/contacts/").concat(e)).delete().res()}Object(B.b)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.d)(de.deleteContact.type,fe);case 2:case"end":return e.stop()}}),e)})));var me=d.addCaseReducers({selectContact:function(e,t){var a=t.payload;e.selectedContactId&&e.selectedContactId===a.id?e.selectedContactId=0:e.selectedContactId=a.id}}).selectContact,ve=d.addCaseReducers({toggleContact:function(e,t){var a=t.payload.id,n=e.checkedContactIds,r=n.indexOf(a);-1===r?n.push(a):n.splice(r,1)}}).toggleContact,Ce=a(226),Ee=a(63),Oe=a(216),je=a(196),ye=a.n(je),he=a(194),xe=a.n(he);function ge(e){var t,a=e.contact,n=Object(c.d)(),o=Object(c.e)(y)===a.id,s=Object(c.e)(p).includes(a.id);return r.a.createElement(ce.a,{hover:!0,key:a.id,onClick:function(){return n(me(a))},role:"checkbox",selected:o},r.a.createElement(ne.a,{padding:"checkbox"},r.a.createElement(Ce.a,{checked:s,color:"primary",onChange:function(){n(ve(a))},onClick:function(e){e.stopPropagation()}})),r.a.createElement(ne.a,null,r.a.createElement(Ee.a,null,a.firstName)),r.a.createElement(ne.a,null,r.a.createElement(Ee.a,null,a.lastName)),r.a.createElement(ne.a,null,r.a.createElement(Ee.a,null,(t=a.birthDate,Object(se.a)(Object(le.a)(t),"MMM d, yyyy")))),r.a.createElement(ne.a,null,r.a.createElement(Oe.a,{color:"primary",onClick:function(e){e.stopPropagation(),n(q(a))}},r.a.createElement(xe.a,null)),r.a.createElement(Oe.a,{color:"secondary",onClick:function(e){e.stopPropagation(),n(ue(a))}},r.a.createElement(ye.a,null))))}var ke=[{id:"firstName",label:"First Name"},{id:"lastName",label:"Last Name"},{id:"birthDate",label:"Born"}];function Ne(e){var t=e.contacts,a=Object(c.d)(),n=Object(c.e)(O),o=Object(c.e)(j);return r.a.createElement(te.a,null,r.a.createElement(re.a,null,r.a.createElement(ce.a,null,r.a.createElement(ne.a,{padding:"checkbox"}),ke.map((function(e){return r.a.createElement(ne.a,{key:e.id,onClick:function(){return a(Q(e.id))}},r.a.createElement(oe.a,{active:n===e.id,direction:o},e.label))})))),r.a.createElement(ae.a,null,t&&t.map((function(e){return r.a.createElement(ge,{contact:e,key:e.id})}))))}var Ie=d.addCaseReducers({editNewContact:function(e){e.editContact={birthDate:"",firstName:"",id:0,lastName:""}}}).editNewContact;function we(){var e=Object(c.d)(),t=Object(c.e)(v),a=Object(c.e)(C),o=Object(c.e)(x);Object(n.useEffect)((function(){e(X())}),[e]);var s=De();return r.a.createElement("div",{className:s.root},r.a.createElement(ee.a,{className:s.content},r.a.createElement("div",{className:s.filterBar},r.a.createElement(w.a,{label:"Filter",onChange:function(t){return e(_(t.target.value))},value:t}),r.a.createElement("span",{className:s.spacer}),r.a.createElement(I.a,{color:"primary",onClick:function(){return e(Ie())},variant:"contained"},"Add New"),r.a.createElement(I.a,{disabled:a,onClick:function(){return e(X())},variant:"outlined"},a?"Loading...":"Re-Load")),r.a.createElement("hr",null),r.a.createElement(Ne,{contacts:o})))}var De=Object(H.a)((function(e){return Object(K.a)({content:{flexGrow:1,padding:e.spacing(2)},filterBar:{display:"flex",flexDirection:"row"},root:{display:"flex"},spacer:{flexGrow:1},toolbar:e.mixins.toolbar})}));t.default=function(){var e=Object(c.e)(m);return r.a.createElement("div",null,e?r.a.createElement(z,{editContact:e}):r.a.createElement(we,null))}}}]);
//# sourceMappingURL=ContactsQrs.f9cbb46f.chunk.js.map